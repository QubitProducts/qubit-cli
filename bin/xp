#!/usr/bin/env node
var program = require('commander')
var pkg = require('../package.json')
var createServer = require('../src/server')
var scaffold = require('../src/server/lib/code/scaffold')
var log = require('../src/server/lib/utils/log')

program
  .version(pkg.version)
  .option('-p, --port [port]', 'use custom [port]', Number, 1234)
  .option('-w, --wait', 'wait for window.__qubit.amd')
  .parse(process.argv)

scaffold(process.cwd(), null, false, log)
createServer(program).listen(program.port)
log(`xp listening on port ${program.port}`)
